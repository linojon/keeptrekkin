
User
  provider
  fb uid
  hiker_id

Hiker
  name
  email

.
New user - sign up via facebook
  get facebook id
  create user
  lookup hiker by email , save
  [else lookup hiker by name, give user list to choose which hiker he is]
  else create new hiker too

Existing user - sign in via facebook

---
Editing Trip, add hiker
  List of hikers from any trips i've already taken
  or Search
    Search my4k user by name or email, select
  or Invite
    create hiker
    email, name
      email token link (hiker id?) /user/accept/:hiker_token

Invited 
  click link
  login via facebook
  the token in the link associates the user with the hiker


xxxxxxxxxx
TRELLO
Add Member
  (see trello)
  "Search for a person in Trello by name or email address, or enter an email address to invite someone new."
  Typeahead presents list of known users (8 max)
    can pick from list to add
  if valid email
    "jonathan@linowes.net? We don’t know that person. Add a name and click “Send” and we’ll add a virtual member and send them an invite email. They'll automatically receive access to the board once they sign up and confirm their email address."
    Full name: [Fill in with email name titleized dashes or underscores]
    Send

---

xxx
User invites new hiker/user
  (see trello)
  Add hiker: email

---
homepage redirect when logged in

trips scoped by current_user
mountains tagged for current_user
mountains tagged for current + others


authorization with pundit


hiker - profile
  name
    email
    picture
  facebook email (potentially different, only care if use doesnt use token link but signs in separately we shoud compare the fb email with a user or hiker one to see if already in the system)
  facebook headshot

  belongs to user


Invite hiker
  create a hiker (name, email)
  create a user associate with hiker
  generate a user authentication token
  send invite to user, with token link

  token link action, 
    sign up via facebook
    active user


trips crud
  simple_form
  redcarpet, epic editor
  authorized
  wiki journal
  link to instagram and fb images? (sharing permissions?)

sort trips, mountains index table


admin mountains
  scrape mountain data from 4000footers

mountain alpha name vs full name

add concept of friends for mountains list and picking hikers


%%%%%%%%%%%

= simple_form_for trip,  as: 'user_horizontal', html: { class: 'well form-horizontal' }, wrapper: :horizontal_form,wrapper_mappings: { check_boxes: :horizontal_radio_and_checkboxes, radio_buttons: :horizontal_radio_and_checkboxes, file: :horizontal_file_input, boolean: :horizontal_boolean } do |f|

  = f.input :date, as: :string, input_html: {data:{behavior:'datepicker'}}

    = f.input :date, as: :hidden, input_html: {id: 'trip_date'}
    %label Date of Trip
    #inline_datepicker

:coffee
  $('#inline_datepicker').datepicker(
    format: "yyyy-mm-dd", # date format must match the database date format
    todayHighlight: true,
    todayBtn: 'linked',
    autoclose: true
  ).on( 'changeDate', (e) ->
    $('#trip_date').val(e.format('yyyy-mm-dd'))
  )

  $('[data-behavior~=datepicker]').datepicker(
    format: "yyyy-mm-dd", # date format must match the database date format
    todayHighlight: true,
    todayBtn: 'linked',
    autoclose: true
  )




